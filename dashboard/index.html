<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Searchboost Opti — SEO Dashboard</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- LOGIN -->
  <div class="login-overlay" id="loginOverlay">
    <div class="login-box">
      <h1><span class="login-brand">Searchboost</span> Opti</h1>
      <p class="login-sub">SEO Dashboard</p>
      <input type="text" id="loginUsername" placeholder="Användarnamn" onkeydown="if(event.key==='Enter')document.getElementById('loginPassword').focus()">
      <input type="password" id="loginPassword" placeholder="Lösenord" onkeydown="if(event.key==='Enter')doLogin()">
      <button onclick="doLogin()">Logga in</button>
      <div class="login-error" id="loginError">Fel lösenord</div>
    </div>
  </div>

  <div id="appShell" style="display:none">
  <header class="header">
    <div class="header-inner">
      <a href="/" class="logo-link">
        <img src="https://searchboost.se/wp-content/uploads/2025/10/seachboost.logo_.png" alt="Searchboost" class="logo-img">
        <span class="logo-text">Opti</span>
      </a>
      <nav class="nav">
        <a href="#" class="nav-link active" data-view="overview">Dashboard</a>
        <a href="#" class="nav-link" data-view="pipeline">Pipeline</a>
        <a href="#" class="nav-link" data-view="optimizations">Optimeringar</a>
        <a href="#" class="nav-link" data-view="queue">Arbetsflöde</a>
        <a href="#" class="nav-link" data-view="reports">Rapporter</a>
      </nav>
      <div class="header-status">
        <span class="status-dot"></span>
        <span id="status-text">Ansluter...</span>
        <button class="btn-logout" onclick="doLogout()">Logga ut</button>
      </div>
    </div>
  </header>

  <main class="main">
    <!-- Overview -->
    <section id="view-overview" class="view active">
      <div class="stats-row">
        <div class="stat-card">
          <div class="stat-value" id="stat-customers">—</div>
          <div class="stat-label">Kunder</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="stat-optimizations">—</div>
          <div class="stat-label">Optimeringar (7d)</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="stat-queue">—</div>
          <div class="stat-label">I arbetskö</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="stat-score">—</div>
          <div class="stat-label">Snitt SEO-score</div>
        </div>
      </div>

      <div class="grid-2">
        <div class="card">
          <h2 class="card-title">Senaste optimeringar</h2>
          <div id="recent-optimizations" class="card-body">
            <p class="empty">Laddar...</p>
          </div>
        </div>
        <div class="card">
          <h2 class="card-title">Kunder</h2>
          <div id="customer-list" class="card-body">
            <p class="empty">Laddar...</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Pipeline -->
    <section id="view-pipeline" class="view">
      <div class="stats-row">
        <div class="stat-card">
          <div class="stat-value" id="pipe-stat-prospects">—</div>
          <div class="stat-label">Prospekt</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="pipe-stat-active">—</div>
          <div class="stat-label">Aktiva avtal</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="pipe-stat-mrr">—</div>
          <div class="stat-label">MRR (kr)</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="pipe-stat-total">—</div>
          <div class="stat-label">Totalt</div>
        </div>
      </div>
      <div class="card">
        <h2 class="card-title">Kanban — Kundpipeline</h2>
        <div id="pipeline-kanban" class="pipeline-kanban">
          <p class="empty">Laddar...</p>
        </div>
      </div>
    </section>

    <!-- Optimizations -->
    <section id="view-optimizations" class="view">
      <div class="card">
        <h2 class="card-title">Alla optimeringar</h2>
        <div id="all-optimizations" class="card-body">
          <p class="empty">Laddar...</p>
        </div>
      </div>
    </section>

    <!-- Queue -->
    <section id="view-queue" class="view">
      <div class="card">
        <h2 class="card-title">Arbetskö</h2>
        <div id="work-queue" class="card-body">
          <p class="empty">Laddar...</p>
        </div>
      </div>
    </section>

    <!-- Reports -->
    <section id="view-reports" class="view">
      <div class="card">
        <h2 class="card-title">Veckorapporter</h2>
        <div id="reports-list" class="card-body">
          <p class="empty">Laddar...</p>
        </div>
      </div>
    </section>

    <!-- Customer Detail -->
    <section id="view-customer-detail" class="view">
      <div class="detail-back">
        <a href="#" id="back-to-overview">&larr; Tillbaka</a>
      </div>
      <div class="detail-header" id="detail-header">
        <div class="detail-avatar" id="detail-avatar">—</div>
        <div class="detail-info">
          <h2 id="detail-name">—</h2>
          <p class="detail-url" id="detail-url">—</p>
          <div class="detail-integrations" id="detail-integrations"></div>
        </div>
      </div>
      <div class="stats-row" id="detail-stats-row">
        <div class="stat-card">
          <div class="stat-value" id="detail-stat-opts">0</div>
          <div class="stat-label">Optimeringar (30d)</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="detail-stat-queue">0</div>
          <div class="stat-label">I kö</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="detail-stat-top10">—</div>
          <div class="stat-label">Topp 10</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="detail-stat-keywords">—</div>
          <div class="stat-label">Sökord</div>
        </div>
      </div>
      <div id="detail-contract-bar" class="contract-bar" style="display:none"></div>
      <div id="detail-budget-bar" class="budget-bar" style="display:none"></div>

      <!-- Manual Input Section -->
      <div class="card manual-input-card" style="margin-bottom: 24px">
        <h2 class="card-title">Manuell inmatning</h2>
        <div class="tab-bar">
          <button class="tab-btn active" data-tab="tab-audit" onclick="switchTab(this)">SEO-analys</button>
          <button class="tab-btn" data-tab="tab-keywords" onclick="switchTab(this)">Nyckelord (ABC)</button>
          <button class="tab-btn" data-tab="tab-plan" onclick="switchTab(this)">Åtgärdsplan</button>
        </div>

        <!-- Tab 1: SEO Audit -->
        <div id="tab-audit" class="tab-content active">
          <div id="audit-existing" class="audit-existing" style="display:none"></div>
          <label class="form-label">Analys-sammanfattning (fritext från SE Ranking)</label>
          <textarea id="audit-summary" class="form-textarea" rows="6" placeholder="Klistra in analysen här..."></textarea>
          <label class="form-label" style="margin-top:12px">Sidspecifika problem</label>
          <div id="audit-issues" class="issue-rows"></div>
          <button class="btn-small btn-add" onclick="addAuditIssueRow()">+ Lägg till rad</button>
          <div style="margin-top:16px">
            <button class="btn-primary" onclick="saveManualAudit()">Spara analys</button>
            <span id="audit-save-status" class="save-status"></span>
          </div>
        </div>

        <!-- Tab 2: Keywords ABC -->
        <div id="tab-keywords" class="tab-content">
          <div class="form-row">
            <label class="form-label">Fas:</label>
            <label class="radio-label"><input type="radio" name="kw-phase" value="initial" checked> Initial (från kund)</label>
            <label class="radio-label"><input type="radio" name="kw-phase" value="final"> Final (efter uppstartsmöte)</label>
          </div>
          <div class="kw-group">
            <h4>A-ord (5 st) — Huvudnyckelord</h4>
            <div id="kw-a-rows"></div>
          </div>
          <div class="kw-group">
            <h4>B-ord (5 st) — Sekundära</h4>
            <div id="kw-b-rows"></div>
          </div>
          <div class="kw-group">
            <h4>C-ord (10 st) — Långsvans</h4>
            <div id="kw-c-rows"></div>
          </div>
          <div style="margin-top:16px">
            <button class="btn-primary" onclick="saveManualKeywords()">Spara nyckelord</button>
            <span id="kw-save-status" class="save-status"></span>
          </div>
        </div>

        <!-- Tab 3: Action Plan -->
        <div id="tab-plan" class="tab-content">
          <div id="plan-tasks-input">
            <div class="plan-month-group">
              <h4>Månad 1 — Grundarbete</h4>
              <div id="plan-month-1-rows"></div>
              <button class="btn-small btn-add" onclick="addPlanTaskRow(1)">+ Lägg till åtgärd</button>
            </div>
            <div class="plan-month-group">
              <h4>Månad 2 — Tillväxt</h4>
              <div id="plan-month-2-rows"></div>
              <button class="btn-small btn-add" onclick="addPlanTaskRow(2)">+ Lägg till åtgärd</button>
            </div>
            <div class="plan-month-group">
              <h4>Månad 3 — Förfining</h4>
              <div id="plan-month-3-rows"></div>
              <button class="btn-small btn-add" onclick="addPlanTaskRow(3)">+ Lägg till åtgärd</button>
            </div>
          </div>
          <div style="margin-top:16px; display:flex; gap:12px; align-items:center">
            <button class="btn-primary" onclick="saveManualPlan()">Spara åtgärdsplan</button>
            <button class="btn-secondary" onclick="autoGeneratePlan()">Auto-generera från audit + nyckelord</button>
            <span id="plan-save-status" class="save-status"></span>
          </div>
        </div>
      </div>

      <div class="card" style="margin-bottom: 24px">
        <h2 class="card-title">Sökordspositioner (GSC + ABC-ord)</h2>
        <div id="detail-rankings" class="card-body">
          <p class="empty">Laddar...</p>
        </div>
      </div>
      <div class="card" style="margin-bottom: 24px">
        <h2 class="card-title">Åtgärdsplan (3 månader)</h2>
        <div id="detail-action-plan" class="card-body">
          <p class="empty">Laddar...</p>
        </div>
      </div>
      <div class="grid-2">
        <div class="card">
          <h2 class="card-title">Optimeringar (senaste 30d)</h2>
          <div id="detail-optimizations" class="card-body">
            <p class="empty">Laddar...</p>
          </div>
        </div>
        <div class="card">
          <h2 class="card-title">Arbetskö</h2>
          <div id="detail-queue" class="card-body">
            <p class="empty">Laddar...</p>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    <p>Searchboost Opti — Semi-autonom SEO-optimering | searchboost.se</p>
  </footer>

  </div><!-- /appShell -->
  <script src="app.js"></script>
</body>
</html>
