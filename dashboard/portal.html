<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Searchboost Opti -- Kundportal</title>
  <meta name="description" content="Din SEO-dashboard. Se prestanda, sokord, optimeringar och atgardsplan i realtid.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@300;400;500;600;700;800&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="portal.css">
  <script src="https://cdn.jsdelivr.net/npm/apexcharts@3.45.1/dist/apexcharts.min.js" defer></script>
</head>
<body>

  <!-- ════════════════════════ LOGIN ════════════════════════ -->
  <div class="login-overlay" id="loginOverlay">
    <div class="login-box">
      <img src="./assets/searchboost-opti-neon.png" alt="Searchboost" class="login-logo">
      <h1><span class="login-brand">Kundportal</span></h1>
      <p class="login-sub">Logga in for att se din SEO-data</p>
      <input type="email" id="loginEmail" placeholder="E-postadress" autocomplete="email" onkeydown="if(event.key==='Enter')document.getElementById('loginPassword').focus()">
      <input type="password" id="loginPassword" placeholder="Losenord" autocomplete="current-password" onkeydown="if(event.key==='Enter')portalLogin()">
      <button class="login-btn" onclick="portalLogin()">Logga in</button>
      <div class="login-error" id="loginError">Fel e-post eller losenord</div>
    </div>
  </div>

  <!-- ════════════════════════ APP SHELL ════════════════════ -->
  <div id="appShell" style="display:none">

    <!-- Header -->
    <header class="portal-header">
      <div class="header-inner">
        <a href="portal.html" class="logo-link">
          <img src="./assets/searchboost-opti-neon.png" alt="Searchboost OPTI" class="logo-img">
        </a>
        <div class="header-customer">
          <div class="header-customer-name" id="headerName">---</div>
          <div class="header-customer-url" id="headerUrl">---</div>
        </div>
        <button class="btn-logout" onclick="portalLogout()">Logga ut</button>
      </div>
    </header>

    <!-- Main -->
    <main class="portal-main">

      <!-- Welcome banner -->
      <div class="welcome-banner fade-in" id="welcomeBanner">
        <h2 id="welcomeTitle">Valkomna!</h2>
        <p>Har ser du en oversikt av SEO-arbetet vi gor for er sajt. Alla siffror uppdateras automatiskt.</p>
        <div class="welcome-date" id="welcomeDate"></div>
      </div>

      <!-- ══════ SEKTION 1: Prestanda ══════ -->
      <h2 class="section-title">Prestanda</h2>
      <div class="gauge-grid" id="gaugeGrid">
        <div class="gauge-card">
          <div class="gauge-chart" id="gauge-mobile"></div>
          <div class="gauge-label">Mobil hastighet</div>
          <div class="gauge-delta neutral" id="delta-mobile"></div>
        </div>
        <div class="gauge-card">
          <div class="gauge-chart" id="gauge-desktop"></div>
          <div class="gauge-label">Desktop hastighet</div>
          <div class="gauge-delta neutral" id="delta-desktop"></div>
        </div>
        <div class="gauge-card">
          <div class="gauge-chart" id="gauge-seo"></div>
          <div class="gauge-label">SEO-framsteg</div>
          <div class="gauge-delta neutral" id="delta-seo"></div>
        </div>
        <div class="gauge-card">
          <div class="gauge-chart" id="gauge-position"></div>
          <div class="gauge-label">Snittposition</div>
          <div class="gauge-delta neutral" id="delta-position"></div>
        </div>
      </div>

      <!-- ══════ SEKTION 2: Sokord ══════ -->
      <div class="card" id="section-keywords">
        <div class="card-header">
          <h3>Sokord och positioner</h3>
        </div>
        <div id="keywordsSummary" class="card-summary"></div>
        <div class="card-body" id="keywordsBody">
          <div class="loading-state"><div class="spinner"></div><span>Hamtar sokord...</span></div>
        </div>
      </div>

      <!-- ══════ SEKTION 3: Optimeringar ══════ -->
      <div class="card" id="section-optimizations">
        <div class="card-header">
          <h3>Utforda optimeringar</h3>
        </div>
        <div id="optSummary" class="card-summary"></div>
        <div class="card-body" id="optimizationsBody">
          <div class="loading-state"><div class="spinner"></div><span>Hamtar optimeringar...</span></div>
        </div>
      </div>

      <!-- ══════ SEKTION 4: Atgardsplan ══════ -->
      <div class="card" id="section-plan">
        <div class="card-header">
          <h3>Atgardsplan</h3>
        </div>
        <div class="card-body" id="planBody">
          <div class="loading-state"><div class="spinner"></div><span>Hamtar atgardsplan...</span></div>
        </div>
      </div>

      <!-- ══════ SEKTION 5: AI-chatt ══════ -->
      <div class="card" id="section-chat">
        <div class="card-header">
          <h3>Fraga om din sajt</h3>
        </div>
        <div class="chat-container">
          <div class="chat-messages" id="chatMessages">
            <div class="chat-msg chat-msg--bot">Hej! Jag ar din SEO-assistent. Stall en fraga om din sajt, t.ex. "Hur manga sokord ar i topp 10?" eller "Vad har ni optimerat senast?"</div>
          </div>
          <div class="chat-input-row">
            <input type="text" class="chat-input" id="chatInput" placeholder="Stall en fraga..." onkeydown="if(event.key==='Enter')sendChat()">
            <button class="chat-send-btn" id="chatSendBtn" onclick="sendChat()">Skicka</button>
          </div>
        </div>
      </div>

    </main>

    <!-- Footer -->
    <footer class="portal-footer">
      <div class="footer-gradient"></div>
      <p>Drivs av <a href="https://searchboost.se" target="_blank" rel="noopener">Searchboost</a> -- vi gor er synliga</p>
    </footer>

  </div><!-- /appShell -->

  <script src="portal.js"></script>
</body>
</html>
